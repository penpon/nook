# TASK-013: API層エラーハンドリング強化

## タスク概要
フロントエンドのエラーハンドリング機能を強化し、API呼び出し時の詳細なエラー情報取得とログ出力機能を追加

## 変更予定ファイル
- `/Users/nana/workspace/nook/nook/frontend/src/api.ts`

## 前提タスク
TASK-012（型定義修正完了後）

## worktree名
worktrees/TASK-013-api-error-handling

## 作業内容

### 1. 現状分析
- 現在のapi.ts のエラーハンドリング実装を確認
- axios のエラー処理方法を調査
- レスポンス処理でのエラー発生パターンを特定

### 2. エラーハンドリング強化
- axios インターセプターを使用した統一エラーハンドリング実装
- API エラーの詳細情報を構造化（ステータスコード、メッセージ、レスポンス内容）
- ネットワークエラーとサーバーエラーの区別

### 3. ログ機能追加
- 開発環境での詳細ログ出力機能
- プロダクション環境での適切なログレベル設定
- エラー発生時のコンテキスト情報（URL、パラメータ等）の記録

### 4. エラー回復機能
- 自動リトライロジック（ネットワークエラー時）
- タイムアウト設定の最適化
- ユーザーフレンドリーなエラーメッセージの提供

### 5. 型安全性確保
- エラーレスポンスの型定義追加
- API レスポンスの型ガード実装
- 未知のレスポンス形式への対応

### 6. 動作確認
- 正常なAPI呼び出しでの動作確認
- ネットワークエラー時の動作確認
- サーバーエラー時の動作確認
- ブラウザコンソールでのログ出力確認

### 品質管理
- [ ] ビルドが成功する
- [ ] 既存テストが成功する
- [ ] API 呼び出しが正常動作する
- [ ] エラー時に詳細情報がコンソールに出力される
- [ ] エラー回復機能が適切に動作する

### 技術的注意事項
- 既存のAPI呼び出し方法との互換性を保持
- パフォーマンスへの影響を最小化
- セキュリティ上重要な情報のログ出力は避ける
- React Query との連携を考慮した実装

### 期待される結果
- API呼び出し時のエラーが詳細に把握できる
- 問題発生時の原因特定が容易になる
- ユーザー体験の向上（適切なエラーメッセージ表示）
- システム全体の安定性向上