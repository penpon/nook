# TASK-020: è«–æ–‡è¦ç´„ã®è¡¨ç¤ºã‚¿ã‚¤ãƒˆãƒ«æ”¹å–„

## ã‚¿ã‚¹ã‚¯æ¦‚è¦
paper_summarizerã§ç”Ÿæˆã•ã‚Œã‚‹è«–æ–‡è¦ç´„ã®8ã¤ã®è³ªå•æ–‡ã‚’ã€Webè¡¨ç¤ºæ™‚ã«ã‚ˆã‚Šèª­ã¿ã‚„ã™ã„ã‚¿ã‚¤ãƒˆãƒ«ã«å¤‰æ›ã™ã‚‹æ©Ÿèƒ½ã‚’å®Ÿè£…ã™ã‚‹ã€‚ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã¯ç¾çŠ¶ç¶­æŒã§ã€è¡¨ç¤ºã®ã¿ã‚’æ”¹å–„ã™ã‚‹ã€‚

## å¤‰æ›´äºˆå®šãƒ•ã‚¡ã‚¤ãƒ«
- `/Users/nana/workspace/nook/nook/api/routers/content.py`

## å‰æã‚¿ã‚¹ã‚¯
ãªã—

## worktreeå
`worktrees/TASK-020-improve-paper-summary-titles`

## ä½œæ¥­å†…å®¹

### 1. content.pyã«ä»¥ä¸‹ã®å‡¦ç†ã‚’è¿½åŠ 

1. **ã‚¿ã‚¤ãƒˆãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°ã®å®šç¾©ã‚’è¿½åŠ **ï¼ˆãƒ•ã‚¡ã‚¤ãƒ«ä¸Šéƒ¨ã€importæ–‡ã®å¾Œï¼‰ï¼š

```python
# è«–æ–‡è¦ç´„ã®è³ªå•æ–‡ã‚’èª­ã¿ã‚„ã™ã„ã‚¿ã‚¤ãƒˆãƒ«ã«å¤‰æ›ã™ã‚‹ãƒãƒƒãƒ”ãƒ³ã‚°
PAPER_SUMMARY_TITLE_MAPPING = {
    "1. æ—¢å­˜ç ”ç©¶ã§ã¯ä½•ãŒã§ããªã‹ã£ãŸã®ã‹": "ğŸ” ç ”ç©¶èƒŒæ™¯ã¨èª²é¡Œ",
    "2. ã©ã®ã‚ˆã†ãªã‚¢ãƒ—ãƒ­ãƒ¼ãƒã§ãã‚Œã‚’è§£æ±ºã—ã‚ˆã†ã¨ã—ãŸã‹": "ğŸ’¡ ææ¡ˆæ‰‹æ³•",
    "3. çµæœã€ä½•ãŒé”æˆã§ããŸã®ã‹": "ğŸ¯ ä¸»è¦ãªæˆæœ",
    "4. åˆ¶é™ã‚„å•é¡Œç‚¹ã¯ä½•ã§ã™ã‹": "âš ï¸ é™ç•Œã¨ä»Šå¾Œã®èª²é¡Œ",
    "5. æŠ€è¡“çš„ãªè©³ç´°ã«ã¤ã„ã¦": "ğŸ”§ æŠ€è¡“è©³ç´°",
    "6. ã‚³ã‚¹ãƒˆã‚„ç‰©ç†çš„ãªè©³ç´°ã«ã¤ã„ã¦": "ğŸ’» è¨ˆç®—ãƒªã‚½ãƒ¼ã‚¹ã¨è¦æ¨¡",
    "7. å‚è€ƒæ–‡çŒ®ã®ã†ã¡ã€ç‰¹ã«å‚ç…§ã™ã¹ãã‚‚ã®": "ğŸ“š é‡è¦ãªé–¢é€£ç ”ç©¶",
    "8. ã“ã®è«–æ–‡ã‚’140å­—ä»¥å†…ã§è¦ç´„ã™ã‚‹ã¨": "ğŸ“ 140å­—è¦ç´„"
}
```

2. **å¤‰æ›é–¢æ•°ã®å®Ÿè£…**ï¼ˆã‚¿ã‚¤ãƒˆãƒ«ãƒãƒƒãƒ”ãƒ³ã‚°ã®å¾Œï¼‰ï¼š

```python
def convert_paper_summary_titles(content: str) -> str:
    """è«–æ–‡è¦ç´„ã®è³ªå•æ–‡ã‚’èª­ã¿ã‚„ã™ã„ã‚¿ã‚¤ãƒˆãƒ«ã«å¤‰æ›"""
    result = content
    
    # å„è³ªå•æ–‡ã‚’å¯¾å¿œã™ã‚‹ã‚¿ã‚¤ãƒˆãƒ«ã«ç½®æ›
    for original_title in PAPER_SUMMARY_TITLE_MAPPING:
        # è³ªå•æ–‡ã®å…¨ä½“ã¾ãŸã¯ä¸€éƒ¨ã«ãƒãƒƒãƒã™ã‚‹ã‚ˆã†èª¿æ•´
        # "4. åˆ¶é™ã‚„å•é¡Œç‚¹ã¯ä½•ã§ã™ã‹ã€‚æœ¬æ–‡ã§è¨€åŠã•ã‚Œã¦ã„ã‚‹ã‚„ã‚ãªãŸãŒè€ƒãˆã‚‹ã‚‚ã®ã‚‚å«ã‚ã¦æ•™ãˆã¦ãã ã•ã„"ã®ã‚ˆã†ãªé•·ã„æ–‡ã«ã‚‚å¯¾å¿œ
        if original_title in result:
            result = result.replace(original_title, PAPER_SUMMARY_TITLE_MAPPING[original_title])
    
    return result
```

3. **APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã§ã®é©ç”¨**ï¼š

`get_content`é–¢æ•°å†…ã§ã€è«–æ–‡è¦ç´„ï¼ˆpaperï¼‰ã®ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’èª­ã¿è¾¼ã‚“ã å¾Œã«å¤‰æ›ã‚’é©ç”¨ã™ã‚‹ã€‚

å…·ä½“çš„ã«ã¯ã€136è¡Œç›®ä»˜è¿‘ã®ä»¥ä¸‹ã®ã‚³ãƒ¼ãƒ‰ï¼š
```python
# ä»–ã®ã‚½ãƒ¼ã‚¹ã¯å¾“æ¥é€šã‚ŠMarkdownã‹ã‚‰å–å¾—
content = storage.load_markdown(service_name, target_date)
if content:
    items.append(ContentItem(
        title="" if src == "github" else f"{_get_source_display_name(src)} - {target_date.strftime('%Y-%m-%d')}",
        content=content,
        source=src
    ))
```

ã‚’ä»¥ä¸‹ã®ã‚ˆã†ã«ä¿®æ­£ï¼š
```python
# ä»–ã®ã‚½ãƒ¼ã‚¹ã¯å¾“æ¥é€šã‚ŠMarkdownã‹ã‚‰å–å¾—
content = storage.load_markdown(service_name, target_date)
if content:
    # è«–æ–‡è¦ç´„ã®å ´åˆã¯ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›
    if src == "paper":
        content = convert_paper_summary_titles(content)
    
    items.append(ContentItem(
        title="" if src == "github" else f"{_get_source_display_name(src)} - {target_date.strftime('%Y-%m-%d')}",
        content=content,
        source=src
    ))
```

åŒæ§˜ã«ã€sourceæŒ‡å®šæ™‚ã®å‡¦ç†ï¼ˆ100-108è¡Œç›®ä»˜è¿‘ï¼‰ã‚‚ä¿®æ­£ï¼š
```python
content = storage.load_markdown(service_name, target_date)

if content:
    # è«–æ–‡è¦ç´„ã®å ´åˆã¯ã‚¿ã‚¤ãƒˆãƒ«ã‚’å¤‰æ›
    if source == "paper":
        content = convert_paper_summary_titles(content)
    
    # ãƒãƒ¼ã‚¯ãƒ€ã‚¦ãƒ³ã‹ã‚‰ContentItemã‚’ä½œæˆ
    items.append(ContentItem(
        title="" if source == "github" else f"{_get_source_display_name(source)} - {target_date.strftime('%Y-%m-%d')}",
        content=content,
        source=source
    ))
```

### 2. ãƒ†ã‚¹ãƒˆæ‰‹é †

1. æ—¢å­˜ã®è«–æ–‡è¦ç´„ãƒ‡ãƒ¼ã‚¿ãŒã‚ã‚‹å ´åˆã¯ã€APIã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆ `/api/content?source=paper` ã«ã‚¢ã‚¯ã‚»ã‚¹ã—ã¦ã€è³ªå•æ–‡ãŒæ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«ã«å¤‰æ›ã•ã‚Œã¦ã„ã‚‹ã‹ç¢ºèª
2. æ–°ã—ã„è«–æ–‡è¦ç´„ã‚’ç”Ÿæˆï¼ˆ`paper_summarizer`ã‚’å®Ÿè¡Œï¼‰ã—ã¦ã€è¡¨ç¤ºãŒæ­£ã—ãå¤‰æ›ã•ã‚Œã‚‹ã‹ç¢ºèª
3. ä»–ã®ã‚½ãƒ¼ã‚¹ï¼ˆgithub, hacker newsãªã©ï¼‰ã®è¡¨ç¤ºã«å½±éŸ¿ãŒãªã„ã“ã¨ã‚’ç¢ºèª

### 3. æ³¨æ„äº‹é …

- ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆã‚„`paper_summarizer.py`ã®å‡¦ç†ã¯ä¸€åˆ‡å¤‰æ›´ã—ãªã„
- é•·ã„è³ªå•æ–‡ï¼ˆç‰¹ã«4ç•ªã¨6ç•ªï¼‰ã¯éƒ¨åˆ†ä¸€è‡´ã§æ¤œå‡ºã™ã‚‹å¿…è¦ãŒã‚ã‚‹ãŸã‚ã€å®Ÿè£…æ™‚ã¯æ³¨æ„
- çµµæ–‡å­—ãŒä¸è¦ãªå ´åˆã¯ã€ãƒãƒƒãƒ”ãƒ³ã‚°ã‹ã‚‰çµµæ–‡å­—ã‚’å‰Šé™¤ã™ã‚‹ã“ã¨ã§å¯¾å¿œå¯èƒ½

## å®Œäº†æ¡ä»¶

- [ ] content.pyã«ã‚¿ã‚¤ãƒˆãƒ«å¤‰æ›æ©Ÿèƒ½ã‚’å®Ÿè£…
- [ ] è«–æ–‡è¦ç´„ã®è¡¨ç¤ºã§8ã¤ã®è³ªå•æ–‡ãŒæ–°ã—ã„ã‚¿ã‚¤ãƒˆãƒ«ã«ç½®ãæ›ã‚ã£ã¦ã„ã‚‹
- [ ] ä»–ã®ãƒ‹ãƒ¥ãƒ¼ã‚¹ã‚½ãƒ¼ã‚¹ã®è¡¨ç¤ºã«å½±éŸ¿ãŒãªã„
- [ ] ãƒ“ãƒ«ãƒ‰ã‚¨ãƒ©ãƒ¼ãŒãªã„
- [ ] å®Ÿè£…ã—ãŸã‚³ãƒ¼ãƒ‰ã«è­¦å‘ŠãŒãªã„